  <testsuite name="blackbox" tests="1" failures="1" time="1.753156256">
    <testcase name="TestCancelGetMatch" time="1.225593875">
      <failure message="main_test.go:241: Got unexpected message when cancelling match: [WAITING]">TBMatch: I151211 15:26:41.574   server| HTTP: 127.0.0.1 POST /rpc/Login tbrpc/1.0&#xA;TBMatch: I151211 15:26:41.574   rpcsrv| [Login] Begin&#xA;TBMatch: I151211 15:26:41.574  session| Login request for testUser-0&#xA;TBMatch: I151211 15:26:41.574  session| Got remote IP: 127.0.0.1&#xA;TBMatch: I151211 15:26:41.669    audit| USER(1): login&#xA;TBMatch: E151211 15:26:41.671 redistore| Error looking up session for 1/0: redigo: nil returned&#xA;TBMatch: I151211 15:26:41.672   rpcsrv| [Login] Done (S_SUCCESS, 200, 98ms, 2B, YIISSQ*)&#xA;TBMatch: I151211 15:26:41.673   server| HTTP: 127.0.0.1 POST /rpc/GetGameSessionTicket tbrpc/1.0&#xA;TBMatch: I151211 15:26:41.675   rpcsrv| [GetGameSessionTicket] Begin&#xA;TBMatch: I151211 15:26:41.675   rpcsrv| [GetGameSessionTicket] Done (S_SUCCESS, 200, 2ms, 182B, YIISSQ)&#xA;TBMatch: I151211 15:26:41.676   server| HTTP: 127.0.0.1 POST /rpc/Logout tbrpc/1.0&#xA;TBMatch: I151211 15:26:41.677   rpcsrv| [Logout] Begin&#xA;TBMatch: I151211 15:26:41.678   rpcsrv| [Logout] Done (S_SUCCESS, 200, 2ms, 2B, YIISSQ)&#xA;TBMatch: I151211 15:26:41.679   server| HTTP: 127.0.0.1 POST /rpc/RedeemGameSessionTicket tbrpc/1.0&#xA;TBMatch: I151211 15:26:41.679   rpcsrv| [RedeemGameSessionTicket] Begin&#xA;TBMatch: E151211 15:26:41.680 redistore| Error looking up session for 1/100: redigo: nil returned&#xA;TBMatch: I151211 15:26:41.681   rpcsrv| [RedeemGameSessionTicket] Done (S_SUCCESS, 200, 2ms, 2B, 7ZMSKA*)&#xA;TBMatch: I151211 15:26:41.681   server| HTTP: 127.0.0.1 POST /rpc/GetMatchQueueConfig tbrpc/1.0&#xA;TBMatch: I151211 15:26:41.682   server| HTTP: 127.0.0.1 POST /rpc/GetEvent tbrpc/1.0&#xA;TBMatch: I151211 15:26:41.683   rpcsrv| [GetMatchQueueConfig] Begin&#xA;TBMatch: I151211 15:26:41.683   rpcsrv| [GetEvent] Begin&#xA;TBMatch: I151211 15:26:41.685 eventmgr| Event listener started.&#xA;TBMatch: I151211 15:26:41.690   rpcsrv| [GetMatchQueueConfig] Done (S_SUCCESS, 200, 8ms, 6B, 7ZMSKA)&#xA;TBMatch: I151211 15:26:41.690   server| HTTP: 127.0.0.1 POST /rpc/GetMatch tbrpc/1.0&#xA;TBMatch: I151211 15:26:41.692   rpcsrv| [GetMatch] Begin&#xA;TBMatch: E151211 15:26:41.694    match| user 1 Invalid skill estimate SET_NONE. Using standard unrated glicko rating.&#xA;TBMatch: E151211 15:26:41.696    match| Invalid continent code: &#xA;TBMatch: I151211 15:26:41.699   rpcsrv| [GetEvent] Done (S_SUCCESS, 200, 16ms, 29B, 7ZMSKA)&#xA;TBMatch: I151211 15:26:41.700   rpcsrv| [GetMatch] Done (S_SUCCESS, 200, 9ms, 2B, 7ZMSKA)&#xA;TBMatch: I151211 15:26:41.700   server| HTTP: 127.0.0.1 POST /rpc/GetEvent tbrpc/1.0&#xA;TBMatch: I151211 15:26:41.701   rpcsrv| [GetEvent] Begin&#xA;TBMatch: I151211 15:26:41.704   rpcsrv| [GetEvent] Done (S_SUCCESS, 200, 3ms, 29B, 7ZMSKA)&#xA;TBMatch: I151211 15:26:42.701   server| HTTP: 127.0.0.1 POST /rpc/CancelGetMatch tbrpc/1.0&#xA;TBMatch: I151211 15:26:42.703   rpcsrv| [CancelGetMatch] Begin&#xA;TBMatch: I151211 15:26:42.704   rpcsrv| [CancelGetMatch] Done (S_SUCCESS, 200, 3ms, 2B, 7ZMSKA)&#xA;**************&#xA;FATAL: Got unexpected message when cancelling match: [WAITING]&#xA;**************&#xA;TBMatch: I151211 15:26:42.705   server| HTTP: 127.0.0.1 POST /rpc/SetMatchQueueConfig tbrpc/1.0&#xA;TBMatch: I151211 15:26:42.705   server| HTTP: 127.0.0.1 POST /rpc/GetEvent tbrpc/1.0&#xA;TBMatch: I151211 15:26:42.706   rpcsrv| [GetEvent] Begin&#xA;TBMatch: I151211 15:26:42.707   rpcsrv| [SetMatchQueueConfig] Begin&#xA;TBMatch: I151211 15:26:42.707         | LuaConfig: Set MatchQueue:config:proposalTtl -&gt; 3600&#xA;TBMatch: I151211 15:26:42.707         | LuaConfig: Set MatchQueue:config:queueTicketTtl -&gt; 15&#xA;TBMatch: I151211 15:26:42.708         | LuaConfig: Set MatchQueue:config:selectSize -&gt; 200&#xA;TBMatch: I151211 15:26:42.708         | LuaConfig: Set MatchQueue:config:echelonDistMin -&gt; 0&#xA;TBMatch: I151211 15:26:42.708         | LuaConfig: Set MatchQueue:config:echelonDistMax -&gt; 1&#xA;TBMatch: I151211 15:26:42.709         | LuaConfig: Set MatchQueue:config:echelonDistPerSec -&gt; 0.033&#xA;TBMatch: I151211 15:26:42.709         | LuaConfig: Set MatchQueue:config:echelonScoreCoeff -&gt; 0&#xA;TBMatch: I151211 15:26:42.709         | LuaConfig: Set MatchQueue:config:echelonDistNormalizedMin -&gt; 0&#xA;TBMatch: I151211 15:26:42.709         | LuaConfig: Set MatchQueue:config:echelonDistNormalizedMax -&gt; 1&#xA;TBMatch: I151211 15:26:42.710         | LuaConfig: Set MatchQueue:config:pointDistMin -&gt; 0&#xA;TBMatch: I151211 15:26:42.710         | LuaConfig: Set MatchQueue:config:pointDistMax -&gt; 10000&#xA;TBMatch: I151211 15:26:42.710         | LuaConfig: Set MatchQueue:config:pointDistPerSec -&gt; 1.5&#xA;TBMatch: I151211 15:26:42.710         | LuaConfig: Set MatchQueue:config:pointScoreCoeff -&gt; 0&#xA;TBMatch: I151211 15:26:42.710         | LuaConfig: Set MatchQueue:config:pointDistNormalizedMin -&gt; 100&#xA;TBMatch: I151211 15:26:42.711         | LuaConfig: Set MatchQueue:config:pointDistNormalizedMax -&gt; 1000&#xA;TBMatch: I151211 15:26:42.711         | LuaConfig: Set MatchQueue:config:lastOppExcludeTime -&gt; 15&#xA;TBMatch: I151211 15:26:42.711         | LuaConfig: Set MatchQueue:config:lastOppTimeout -&gt; 900&#xA;TBMatch: I151211 15:26:42.712         | LuaConfig: Set MatchQueue:config:crossContinentExcludeTime -&gt; 60&#xA;TBMatch: I151211 15:26:42.712         | LuaConfig: Set MatchQueue:config:pingScoreMin -&gt; 70&#xA;TBMatch: I151211 15:26:42.712         | LuaConfig: Set MatchQueue:config:pingScoreMax -&gt; 250&#xA;TBMatch: I151211 15:26:42.712   rpcsrv| [GetEvent] Done (S_SUCCESS, 200, 7ms, 26B, 7ZMSKA)&#xA;TBMatch: I151211 15:26:42.712         | LuaConfig: Set MatchQueue:config:pingScorePerSec -&gt; 10&#xA;TBMatch: I151211 15:26:42.713         | LuaConfig: Set MatchQueue:config:pingScoreCoeff -&gt; 0&#xA;TBMatch: I151211 15:26:42.713         | LuaConfig: Set MatchQueue:config:pingScoreNormalizedMin -&gt; 70&#xA;TBMatch: I151211 15:26:42.713         | LuaConfig: Set MatchQueue:config:pingScoreNormalizedMax -&gt; 150&#xA;TBMatch: I151211 15:26:42.713         | LuaConfig: Set MatchQueue:config:geoDistMin -&gt; 0&#xA;TBMatch: I151211 15:26:42.714         | LuaConfig: Set MatchQueue:config:geoDistMax -&gt; 2.5e+07&#xA;TBMatch: I151211 15:26:42.714         | LuaConfig: Set MatchQueue:config:geoDistPerSec -&gt; 200000&#xA;TBMatch: I151211 15:26:42.714         | LuaConfig: Set MatchQueue:config:geoScoreCoeff -&gt; 0&#xA;TBMatch: I151211 15:26:42.714         | LuaConfig: Set MatchQueue:config:geoDistNormalizedMin -&gt; 200000&#xA;TBMatch: I151211 15:26:42.714         | LuaConfig: Set MatchQueue:config:geoDistNormalizedMax -&gt; 4e+06&#xA;TBMatch: I151211 15:26:42.714         | LuaConfig: Set MatchQueue:config:ratingDistMin -&gt; 50&#xA;TBMatch: I151211 15:26:42.715         | LuaConfig: Set MatchQueue:config:ratingDistPerSec -&gt; 125&#xA;TBMatch: I151211 15:26:42.715         | LuaConfig: Set MatchQueue:config:ratingScoreCoeff -&gt; 10&#xA;TBMatch: I151211 15:26:42.715         | LuaConfig: Set MatchQueue:config:ratingDistNormalizedMin -&gt; 100&#xA;TBMatch: I151211 15:26:42.715         | LuaConfig: Set MatchQueue:config:ratingDistNormalizedMax -&gt; 650&#xA;TBMatch: I151211 15:26:42.716         | LuaConfig: Set MatchQueue:config:maintenanceMode -&gt; 0&#xA;TBMatch: I151211 15:26:42.716         | LuaConfig: Set MatchQueue:config:activeMatchTimeout -&gt; 7200&#xA;TBMatch: I151211 15:26:42.716         | LuaConfig: Set MatchQueue:config:waitTimeoutSec -&gt; 180&#xA;TBMatch: I151211 15:26:42.716         | LuaConfig: Set MatchQueue:config:xDeprecatedRatingDistMax -&gt; 650&#xA;TBMatch: I151211 15:26:42.716   rpcsrv| [SetMatchQueueConfig] Done (S_SUCCESS, 200, 11ms, 2B, 7ZMSKA)&#xA;TBMatch: I151211 15:26:42.716   server| HTTP: 127.0.0.1 POST /rpc/Logout tbrpc/1.0&#xA;TBMatch: I151211 15:26:42.718   rpcsrv| [Logout] Begin&#xA;TBMatch: E151211 15:26:42.719   lualdr| Script lobby/Leave failed: msg.notInLobby&#xA;TBMatch: E151211 15:26:42.719   server| Failed to notify lobby for session close of 1: msg.notInLobby&#xA;TBMatch: I151211 15:26:42.719   rpcsrv| [Logout] Done (S_SUCCESS, 200, 2ms, 2B, 7ZMSKA)&#xA;</failure>
    </testcase>
  </testsuite>